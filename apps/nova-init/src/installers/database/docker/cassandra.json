{
  "name": "cassandra",
  "description": "Distributed NoSQL Database",
  "image": "cassandra:latest",
  "defaultPort": 9042,
  "internalPort": 9042,
  "parameters": {
    "containerName": {
      "type": "string",
      "default": "cassandra",
      "description": "Name des Docker-Containers"
    },
    "port": {
      "type": "number",
      "default": 9042,
      "description": "Port f√ºr die Datenbank"
    },
    "networkName": {
      "type": "string",
      "default": "local_dbs_network",
      "description": "Name des Docker-Netzwerks"
    },
    "volumeName": {
      "type": "string",
      "default": "cassandra_data",
      "description": "Name des Data-Volumes"
    }
  },
  "dockerCompose": {
    "version": "3.8",
    "services": {
      "cassandra": {
        "image": "cassandra:latest",
        "container_name": "${containerName}",
        "environment": {
          "CASSANDRA_CLUSTER_NAME": "LocalCluster",
          "CASSANDRA_DC": "datacenter1",
          "CASSANDRA_RACK": "rack1"
        },
        "healthcheck": {
          "test": ["CMD", "cqlsh", "-u", "cassandra", "-p", "cassandra", "-e", "describe keyspaces"],
          "retries": 3,
          "timeout": "5s"
        },
        "networks": ["local"],
        "ports": ["${port}:9042"],
        "volumes": ["${volumeName}:/var/lib/cassandra"]
      }
    },
    "networks": {
      "local": {
        "driver": "bridge",
        "name": "${networkName}"
      }
    },
    "volumes": {
      "${volumeName}": {
        "driver": "local",
        "name": "${volumeName}"
      }
    }
  },
  "connectionInfo": {
    "host": "localhost",
    "port": "${port}",
    "keyspace": "system",
    "connectionString": "cassandra://localhost:${port}"
  }
}
